---
title: "NIP-59: Gift Wrap"
date: 2025-12-17
draft: false
categories:
  - Privacy
  - Protocol
---

NIP-59はgift wrappingを定義します。これは使い捨てアイデンティティを使用した暗号化層でラップすることでイベントの送信者を隠す技術です。

## 構造

gift wrapされたイベントには3つの層があります:

1. **Rumor** - 元の未署名のイベントコンテンツ
2. **Seal**（kind 13）- 受信者に暗号化されたrumor、実際の送信者が署名
3. **Gift Wrap**（kind 1059）- 受信者に暗号化されたseal、ランダムな使い捨て鍵で署名

外側の層はこのメッセージのためだけに生成されたランダムなキーペアを使用するため、観察者はそれを送信者にリンクできません。

## なぜ3層なのか？

- **rumor**には実際のコンテンツが含まれる
- **seal**は実際の送信者を証明（受信者のみに見える）
- **gift wrap**はリレーと観察者から送信者を隠す

## 削除サポート

gift wrapイベントはNIP-09/NIP-62削除リクエストで削除できるようになりました。これはユーザーがラップされたメッセージをリレーから削除できるようにするために追加されました。

## ユースケース

- プライベートダイレクトメッセージ（NIP-17）
- 匿名のヒントや内部告発
- 送信者のプライバシーが重要なあらゆるシナリオ

---

**主要ソース:**
- [NIP-59仕様](https://github.com/nostr-protocol/nips/blob/master/59.md)

**言及箇所:**
- [ニュースレター #1: ニュース](/ja/newsletters/2025-12-17-newsletter/#news)
- [ニュースレター #1: NIP更新](/ja/newsletters/2025-12-17-newsletter/#nip-updates)

**関連項目:**
- [NIP-17: プライベートダイレクトメッセージ](/ja/topics/nip-17/)

