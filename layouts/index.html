{{ define "main" }}
<div class="home">
  <div class="content">
    <div class="logo">
      {{ partial "logo.html" . }}
    </div>

    <p>{{ i18n "home_intro" }}</p>

    <p>{{ i18n "home_description" (dict "newslettersURL" ("/newsletters/" | relLangURL) "podcastURL" ("/podcast/" | relLangURL) "topicsURL" ("/topics/" | relLangURL)) | safeHTML }}</p>

    <p><a href="{{ "/about/" | relLangURL }}">{{ i18n "home_learn_more" }}</a>.</p>

    <h2>{{ i18n "recent_newsletters" }}</h2>
    {{- $langPrefix := printf "/%s/newsletters/" .Site.Language.Lang -}}
    <ul class="post-list">
      {{ $count := 0 }}
      {{ range .Site.RegularPages.ByDate.Reverse }}
        {{ if and (hasPrefix .RelPermalink $langPrefix) (lt $count 5) }}
          {{ $count = add $count 1 }}
          <li>
            <h3>
              <a class="post-link" href="{{ .RelPermalink }}">{{ .Title }}</a>
            </h3>
            <span class="post-meta">{{ .Date.Format "Jan 2, 2006" }}</span>
            {{ if .Summary }}
              <p class="post-summary">{{ .Summary | truncate 600 }}</p>
            {{ end }}
          </li>
        {{ end }}
      {{ end }}
    </ul>
    {{ if eq $count 0 }}
      <p>{{ i18n "no_newsletters" }}</p>
    {{ else }}
      <p class="rss-subscribe">{{ i18n "view_more_newsletters" (dict "newslettersURL" ("/newsletters/" | relLangURL) "rssURL" ("/newsletters/feed.xml" | relLangURL) "podcastRSSURL" "https://podcast.nostrcompass.org/rss.xml" "nostrURL" "nostr:npub1wav4fae3gyfy3xj298kxj2mj8phavz7vavps34przq02j7w902qq902923") | safeHTML }}</p>
    {{ end }}

    {{ partial "newsletter-signup.html" . }}
  </div>
</div>
{{ end }}



